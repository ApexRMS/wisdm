<?xml version="1.0" encoding="utf-8"?>
<package name="wisdm" displayName="Workbench for Integrated Species Distribution Modeling" version="1.0.17" url="https://apexrms.github.io/wisdm/">
	<transformers>
		<!--Primary Transformer-->
		<transformer 
			name="Primary" 
			isPrimary="True" 
			isPipelineBased="True">
		<include>
			<transformer name="corestime_Runtime"/>
			<transformer name="Global"/>
			<transformer name="PrepMultiprocessing"/>
			<transformer name="SpatialDataPreparation"/>
			<transformer name="SiteDataPreparation"/>
			<transformer name="FieldDataPreparation"/>
			<transformer name="BackgroundDataGeneration"/>
			<transformer name="VariableReduction"/>
			<transformer name="GLM"/>
			<transformer name="RandomForest"/>
			<transformer name="Maxent"/>
			<transformer name="BRT"/>
			<!--transformer name="GAM"/-->
			<transformer name="ApplyModel"/>
			<transformer name="EnsembleModel"/>
		</include>
		</transformer>
	   <!--Global Transformer-->
		<transformer name="Global">
			<datafeeds>
				<datafeed name="Network" dataScope="Library">
				  <datasheets>
					<datasheet name="Network" isSingleRow="True">
					  <columns>
						<column name="NetworkID" dataType="Integer" isPrimary="True"/>
						<column name="NetworkEnabled" displayName="Access online transformation library" dataType="Boolean"/>
					  </columns>
					  <defaultRecords>
                		<record columns="NetworkEnabled" values="-1"/>
              		  </defaultRecords>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="Covariates" dataScope="Project">
				  <datasheets>
					<datasheet name="Covariates" valueMember="CovariatesID" displayMember="CovariateName">
					  <columns>
						<column name="CovariatesID" dataType="Integer" isPrimary="True"/>
						<column name="ProjectID" dataType="Integer"/>
						<column name="CovariateName" displayName="Covariate Name" dataType="String"/>
						<column name="IsCategorical" displayName="Is Categorical" dataType="Boolean" defaultValue="0" isOptional="True"/>
						<column name="Description" dataType="String" isOptional="True"/>
						<column name="ID" dataType="Integer" isOptional="True" fillWeight="5" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="0"/>
                		<column name="Color" dataType="String" isOptional="True" isReadOnly="True" autoSizeMode="None" width="35"/>
					  </columns>
					  <validations>
                		<validation validationType="UniqueOrNull" columns="ID"/>
                		<validation validationType="Unique" columns="CovariateName"/>
              		  </validations>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="Models" dataScope="Project">
				  <datasheets>
					<datasheet name="Models" valueMember="ModelsID" displayMember="ModelName">
					  <columns>
						<column name="ModelsID" dataType="Integer" isPrimary="True"/>
						<column name="ProjectID" dataType="Integer"/>
						<column name="ModelName" dataType="String"/>
						<column name="ModelType" dataType="String"/>
					  </columns>
					  <defaultRecords>
                		<record columns="ModelName|ModelType"	values="Generalized Linear Model|glm"/>
						<record columns="ModelName|ModelType"	values="Random Forest|rf"/>
						<record columns="ModelName|ModelType" values="Maxent|maxent"/>
						<record columns="ModelName|ModelType" values="Boosted Regression Tree|brt"/>
						<!--record columns="ModelName|ModelType"	values="Generalized Additive Model|gam"/-->
              		  </defaultRecords>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="FieldData" displayName="Field Data" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="FieldData" displayName="Field Data">
					  <columns>
						<column name="FieldDataID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="SiteID" displayName="Site" dataType="Integer" isOptional="True"/>
						<column name="X" dataType="Double"/>
						<column name="Y" dataType="Double"/>
						<column name="Response" dataType="Integer"/>
						<column name="UseInModelEvaluation" displayName="Use In Model Evaluation" dataType="Boolean" isOptional="True"/>
						<column name="ModelSelectionSplit" displayName="Model Selection Split" dataType="Integer" isOptional="True"/>
						<column name="Weight" dataType="Double" isOptional="True"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="FieldDataOptions" displayName="Field Data Options" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="FieldDataOptions" isSingleRow="True">
					  <columns>
						<column name="FieldDataOptionsID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="EPSG" displayName="Authority code (e.g., EPSG:4326)" dataType="String" isOptional="True"/>
						<column name="AggregateAndWeight" displayName="Aggregate or weight data" dataType="Integer" validationType="List" formula1="0:Aggregate|1:Weight" isOptional="True"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="BackgroundDataOptions" displayName="Background Data Options" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="BackgroundDataOptions" isSingleRow="True">
					  <columns>
						<column name="BackgroundDataOptionsID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="GenerateBackgroundSites" displayName="Generate background sites" dataType="Boolean" defaultValue="0"/>
					  	<column name="BackgroundSiteCount" displayName="Number of background sites added to field data" dataType="Integer" isOptional="True"/>
						<column name="BackgroundGenerationMethod" displayName="Method used for background site generation" dataType="Integer" validationType="List" formula1="0:Kernel Density Estimate (KDE)|1:Minimum Convex Polygon (MCP)" isOptional="True"/>
					    <column name="KDESurface" displayName="KDE background surface method" dataType="Integer" validationType="List" formula1="0:Continuous|1:Binary" isOptional="True"/>
					    <column name="Isopleth" displayName="Isopleth threshold used for binary mask creation (%)" dataType="Integer" isOptional="True"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="CovariateData" displayName="Covariate Data" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="CovariateData" displayName="Covariate Data">
					  <columns>
						<column name="CovariateDataID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="CovariatesID" displayName="Covariate" dataType="Integer" validationType="Datasheet" formula1="Covariates"/>
						<column name="RasterFilePath" displayName="Raster File" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="ResampleMethod" displayName="Resample Method" dataType="Integer" validationType="List" formula1="0:Nearest Neighbor|1:Bilinear|2:Cubic|3:Cubic Spline|4:Lanczos" isOptional="True" />
						<column name="AggregationMethod" displayName="Aggregation Method" dataType="Integer" validationType="List" formula1="0:Mean|1:Max|2:Min|3:Majority" isOptional="True" />
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="ReducedCovariates" displayName="Retained Covariate List" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="ReducedCovariates" displayName="Retained Covariate List">
					  <columns>
						<column name="ReducedCovariatesID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="CovariatesID" displayName="Covariate" dataType="Integer" validationType="Datasheet" formula1="Covariates"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="SiteData" displayName="Site Data" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="SiteData" displayName="Site Data">
					  <columns>
						<column name="SiteDataID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="SiteID" displayName="Site" dataType="Integer"/>
						<column name="CovariatesID" displayName="Covariate" dataType="Integer" validationType="Datasheet" formula1="Covariates"/>
						<column name="Value" dataType="Double"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="CovariateSelectionOptions" displayName="Covariate Selection Options" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="CovariateSelectionOptions" displayName="Covariate Selection Options" isSingleRow="True">
					  <columns>
						<column name="CovariateSelectionOptionsID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="SelectionMethod" displayName="Covariate selection method" dataType="Integer" validationType="List" formula1="0:Interactive (Correlation Viewer)|1:Automatic (Variance Inflation Factor)" defaultValue="0"/>
						<column name="DisplayHighestCorrelations" displayName="Display highest correlations" dataType="Boolean"/>
						<column name="CorrelationThreshold" displayName="Correlation threshold" dataType="Double" defaultValue="0.7" validationType="Decimal" validationCondition="Between" formula1="0"  formula2="1"/>
						<column name="NumberOfPlots" displayName="Number of plots" dataType="Integer"/>
						<column name="VIFThreshold" displayName="Variance inflation factor threshold" dataType="Integer"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="ValidationOptions" displayName="Validation Options" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="ValidationOptions" displayName="Validation Options" isSingleRow="True">
					  <columns>
						<column name="ValidationOptionsID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="SplitData" displayName="Split data for model training and testing" dataType="Boolean"/>
						<column name="ProportionTrainingData" displayName="Proportion of data used for model training" dataType="Double" validationType="Decimal" validationCondition="Between" formula1="0" formula2="1"/>
						<column name="CrossValidate" displayName="Use cross validation for model selection" dataType="Boolean"/>
						<column name="StratifyFolds" displayName="Stratify cross-validation folds by the response" dataType="Boolean"/>
						<column name="NumberOfFolds" displayName="Number of cross-validation folds" dataType="Integer"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>	
				<datafeed name="TemplateRaster" displayName="Template Raster" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="TemplateRaster" displayName="Template Raster" isSingleRow="True">
					  <columns>
						<column name="TemplateRasterID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="RasterFilePath" displayName="Raster file" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="TileCount" displayName="Number of mulitprocessing tiles (optional)" dataType="Integer"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="RestrictionRaster" displayName="Restriction Raster" dataScope="Scenario">
				  <datasheets>
					<datasheet name="RestrictionRaster" displayName="Restriction Raster" isSingleRow="True">
					  <columns>
						<column name="RestrictionRasterID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="RasterFilePath" displayName="Raster file" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="Description" dataType="String"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
				<datafeed name="ModelOutputs" displayName="Model Outputs" dataScope="Scenario" isOutput="True">
				  <datasheets>
					<datasheet name="ModelOutputs" displayName="Model Outputs">
					  <columns>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="ModelsID" dataType="Integer" validationType="Datasheet" formula1="Models" isVisible="False"/>						
						<column name="ModelRDS" displayName="Model RDS" dataType="String" isExternalFile="True" isReadOnly="True"/>
						<column name="ResponseCurves" dataType="String" isExternalFile="True" isPngImage="True" isVisible="False"/>
						<column name="ResidualsPlot" dataType="String" isExternalFile="True" isPngImage="True" isVisible="False"/>
						<column name="ResidualSmoothPlot" dataType="String" isExternalFile="True" isPngImage="True" isVisible="False"/>
						<column name="ResidualSmoothRDS" dataType="String" isExternalFile="True" isVisible="False"/>
						<column name="TextOutput" dataType="String" isExternalFile="True" isVisible="False"/>
						<column name="CalibrationPlot" dataType="String" isExternalFile="True" isPngImage="True" isVisible="False"/>
						<column name="ROCAUCPlot" dataType="String" isExternalFile="True" isPngImage="True" isVisible="False"/>
						<column name="AUCPRPlot" dataType="String" isExternalFile="True" isPngImage="True" isVisible="False"/>
						<column name="ConfusionMatrix" dataType="String" isExternalFile="True" isPngImage="True" isVisible="False"/>
						<column name="VariableImportancePlot" dataType="String" isExternalFile="True" isPngImage="True" isVisible="False"/>
						<column name="VariableImportanceData" dataType="String" isExternalFile="True" isVisible="False"/>
						<column name="MaxentFiles" dataType="String" isExternalFile="True" isVisible="False"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>	
			</datafeeds>
		</transformer>
		<!--Prepare Multiprocessing Transformer-->
		<transformer
		  name="PrepMultiprocessing"
		  displayName ="1 - Prepare Multiprocessing"
		  isRunnable="True"
		  programName="Python"
		  programArguments="1-prep-multiprocessing.py"
		  condaEnv="wisdm-py-conda.yml">
			<pipeline>
				<datafeed name="TemplateRaster" type="Input"/>
				<datafeed name="corestime_Multiprocessing" type="Output"/>
			</pipeline>
		</transformer>	
		<!--Spatial Data Preparation Transformer-->
		<transformer
		  name="SpatialDataPreparation"
		  displayName ="2 - Spatial Data Preparation"
		  isRunnable="True"
		  programName="Python"
		  programArguments="2-spatial-data-preparation.py"
		  condaEnv="wisdm-py-conda.yml"
		  runContext="LocalOnly">
		  <pipeline>
			<datafeed name="TemplateRaster" type="Input"/>
			<datafeed name="RestrictionRaster"/>
			<datafeed name="CovariateData"/>
		  </pipeline>
		</transformer>
		<!--Site Data Preparation Transformer-->
		<transformer
		  name="SiteDataPreparation"
		  displayName ="3 - Site Data Preparation"
		  isRunnable="True"
		  programName="Python"
		  programArguments="3-site-data-preparation.py"
		  condaEnv="wisdm-py-conda.yml"
		  runContext="LocalOnly">
		  <pipeline>
			<datafeed name="TemplateRaster" type="Input"/>
			<datafeed name="FieldDataOptions" type="Input"/>
			<datafeed name="FieldData"/>
			<datafeed name="CovariateData"/>
			<datafeed name="SiteData" type="Output"/>
		  </pipeline>
		</transformer>
		<!--Background Data Preparation Transformer-->
		<transformer
		  name="BackgroundDataGeneration"
		  displayName ="4 - Background Data Generation"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="4-background-data-generation.R"
		  condaEnv="wisdm-r-conda.yml">
		  <pipeline>
		  	<datafeed name="TemplateRaster" type="Input"/>
			<datafeed name="FieldData"/>
			<datafeed name="BackgroundDataOptions" type="Input"/>
			<datafeed name="CovariateData"/>
			<datafeed name="SiteData"/>
		  </pipeline>
		</transformer>
		<!--Split Data for Training/Testing Transformer-->
		<transformer
		  name="FieldDataPreparation"
		  displayName ="5 - Prepare Training/Testing Data"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="5-prepare-training-testing-data.R"
		  condaEnv="wisdm-r-conda.yml">
		  <pipeline>
			<datafeed name="FieldData"/>
			<datafeed name="ValidationOptions" type="Input"/>
			<datafeed name="SiteData" type="Input"/>
		  </pipeline>
		</transformer>
		<!--Variable Reduction Transformer-->
		<transformer
		  name="VariableReduction"
		  displayName ="6 - Variable Reduction"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="6-variable-reduction.R"
		  condaEnv="wisdm-r-conda.yml">
			<pipeline>
				<datafeed name="FieldData" type="Input"/>
				<datafeed name="SiteData" type="Input"/>
				<datafeed name="CovariateSelectionOptions" type ="Input"/>
				<datafeed name="ReducedCovariates"/>
				<datafeed name="CovariateCorrelationMatrix" type="Output"/>
			</pipeline>
			<datafeeds>
				<datafeed name="CovariateCorrelationMatrix" dataScope="Scenario" isOutput="True">
				  <datasheets>
					<datasheet name="CovariateCorrelationMatrix">
					  <columns>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="InitialMatrix" dataType="String" isExternalFile="True" isPngImage="True"/>
						<column name="SelectedMatrix" dataType="String" isExternalFile="True" isPngImage="True"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
			</datafeeds>
		</transformer>
		<!--GLM Transformer-->
		<transformer
		  name="GLM"
		  displayName ="7 - Generalized Linear Model"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="7-fit-glm.R"
		  condaEnv="wisdm-r-conda.yml">
			<pipeline>
				<datafeed name="FieldData" type="Input"/>
				<datafeed name="ValidationOptions" type="Input"/>
				<datafeed name="ReducedCovariates" type="Input"/>
				<datafeed name="SiteData" type="Input"/>
				<datafeed name="GLM"/>
				<datafeed name="ModelOutputs" type="Output"/>
			</pipeline>	
			<datafeeds>
				<datafeed name="GLM" displayName="Generalized Linear Model" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="GLM" displayName="Generalized Linear Model" isSingleRow="True">
					  <columns>
						<column name="GLMID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="SelectBestPredictors" displayName="Select best predictors" dataType="Boolean"/>
						<column name="SimplificationMethod" displayName="Simplification method" dataType="Integer" validationType="List" formula1="0:AIC|1:BIC"/>
						<column name="ConsiderSquaredTerms" displayName="Consider squared terms" dataType="Boolean"/>
						<column name="ConsiderInteractions" displayName="Consider interactions" dataType="Boolean"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>		
			</datafeeds>
		</transformer>
		<!--Random Forest Transformer-->
		<transformer
		  name="RandomForest"
		  displayName ="7 - Random Forest"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="7-fit-random-forest.R"
		  condaEnv="wisdm-r-conda.yml">
			<pipeline>
				<datafeed name="FieldData" type="Input"/>
				<datafeed name="ValidationOptions" type="Input"/>
				<datafeed name="ReducedCovariates" type="Input"/>
				<datafeed name="SiteData" type="Input"/>
				<datafeed name="RandomForest"/>
				<datafeed name="ModelOutputs" type="Output"/>
			</pipeline>
			<datafeeds>
				<datafeed name="RandomForest" displayName="Random Forest" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="RandomForest" displayName="Random Forest" isSingleRow="True">
					  <columns>
						<column name="RandomForestID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="EvaluateCovariateImportance" displayName="Evaluate covariate importance" dataType="Boolean"/>
						<column name="CalculateCasewiseImportance" displayName="Calculate casewise importance" dataType="Boolean"/>
						<column name="NumberOfVariablesSampled" displayName="Number of variables sampled at split" dataType="Double"/>
						<column name="MaximumNodes" displayName="Maximum number of nodes" dataType="Integer"/>
						<column name="NumberOfTrees" displayName="Number of trees" dataType="Integer"/>
						<column name="NodeSize" displayName="Node size" dataType="Integer"/>
						<column name="NormalizeVotes" displayName="Normalize votes" dataType="Boolean"/>
						<column name="CalculateProximity" displayName="Calculate proximity" dataType="Boolean"/>
						<column name="SampleWithReplacement" displayName="Sample with replacement" dataType="Boolean"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
			</datafeeds>
		</transformer>
		<!--Maxent Transformer-->
		<transformer
		  name="Maxent"
		  displayName ="7 - Maxent"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="7-fit-maxent.R"
		  condaEnv="wisdm-r-conda.yml">
			<pipeline>
				<datafeed name="FieldData" type="Input"/>
				<datafeed name="CovariateData" type="Input"/>
				<datafeed name="ValidationOptions" type="Input"/>
				<datafeed name="ReducedCovariates" type="Input"/>
				<datafeed name="SiteData" type="Input"/>
				<datafeed name="Maxent"/>
				<datafeed name="ModelOutputs" type="Output"/>
			</pipeline>
			<datafeeds>
				<datafeed name="Maxent" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="Maxent" isSingleRow="True">
					  <columns>
						<column name="MaxentID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="MemoryLimit" displayName="Memory allocation (MB)" dataType="Integer"/>
						<column name="MaximumBackgroundPoints" displayName="Maximum number of background points" dataType="Integer"/>
						<column name="MultiprocessingThreads" displayName="Number of processing threads" dataType="Integer"/>
						<column name="VisibleInterface" displayName="View maxent user interface during run" dataType="Boolean"/>
						<column name="SaveMaxentFiles" displayName="Save maxent formatted input/output files" dataType="Boolean"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
			</datafeeds>
		</transformer>
		<!--BRT Transformer-->
		<transformer
		  name="BRT"
		  displayName ="7 - Boosted Regression Tree"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="7-fit-brt.R"
		  condaEnv="wisdm-r-conda.yml">
			<pipeline>
				<datafeed name="FieldData" type="Input"/>
				<datafeed name="CovariateData" type="Input"/>
				<datafeed name="ValidationOptions" type="Input"/>
				<datafeed name="ReducedCovariates" type="Input"/>
				<datafeed name="SiteData" type="Input"/>
				<datafeed name="BRT"/>
				<datafeed name="ModelOutputs" type="Output"/>
			</pipeline>
			<datafeeds>
				<datafeed name="BRT" displayName="Boosted Regression Tree" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="BRT" displayName="Boosted Regression Tree" isSingleRow="True">
					  <columns>
						<column name="BRTID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="FittingMethod" displayName="Fitting method" dataType="Integer" validationType="List" formula1="0:Use defaults and tuning|1:Use values provided below"/>
						<column name="LearningRate" displayName="Learning rate" dataType="Double"/>
						<column name="NumberOfTrees" displayName="Number of trees added per stage" dataType="Integer"/>
						<column name="BagFraction" displayName="Bag fraction" dataType="Double"/>
						<column name="MaximumTrees" displayName="Maximum number of trees" dataType="Integer"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
			</datafeeds>
		</transformer>
		<!--GAM Transformer-->
		<!--transformer
		  name="GAM"
		  displayName ="7 - Generalized Additive Model"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="7-fit-gam.R"
		  condaEnv="wisdm-r-conda.yml">
			<pipeline>
				<datafeed name="FieldData" type="Input"/>
				<datafeed name="CovariateData" type="Input"/>
				<datafeed name="ValidationOptions" type="Input"/>
				<datafeed name="ReducedCovariates" type="Input"/>
				<datafeed name="SiteData" type="Input"/>
				<datafeed name="GAM"/>
				<datafeed name="ModelOutputs" type="Output"/>
			</pipeline>
			<datafeeds>
				<datafeed name="GAM" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="GAM" isSingleRow="True">
					  <columns>
						<column name="GAMID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="AllowShrinkageSmoothers" displayName="Allow smooth terms to shrink to zero" dataType="Boolean"/>
						<column name="ConsiderLinearTerms" displayName="Consider linear terms" dataType="Boolean"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
			</datafeeds>
		</transformer-->
		<!--Apply Model Transformer-->
		<transformer
		  name="ApplyModel"
		  displayName ="8 - Apply Model"
		  isRunnable="True"
		  programName="Rscript"
		  programArguments="8-apply-model.R"
		  className="SyncroSim.StochasticTime.StochasticTimeTransformer" 
		  classAssembly="SyncroSim.StochasticTime"
		  runContext="AllowRemote"
		  condaEnv="wisdm-r-conda.yml">
			<pipeline>
				<datafeed name="corestime_Multiprocessing" type="Input"/>
				<datafeed name="TemplateRaster" type="Input"/>
				<datafeed name="RestrictionRaster" type="Input"/>
				<datafeed name="ModelOutputs" type="Input"/>
				<datafeed name="CovariateData"/>
				<datafeed name="OutputOptions"/>
				<datafeed name="SpatialOutputs" type="Output"/>
			</pipeline>
			<datafeeds>	
				<datafeed name="OutputOptions" displayName="Output Options" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="OutputOptions" displayName="Output Options" isSingleRow="True">
					  <columns>
						<column name="OutputOptionsID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="MakeProbabilityMap" displayName="Make probability map" dataType="Boolean"/>
						<column name="MakeBinaryMap" displayName="Make binary map" dataType="Boolean"/>
						<column name="ThresholdOptimization" displayName="Binary threshold optimization method" dataType="Integer" validationType="List" formula1="0:Max kappa|1:Max sensitivity and specificity|2:No omission|3:Prevalence|4:Sensitivity equals specificity"/>
						<column name="MakeResidualsMap" displayName="Make residuals map" dataType="Boolean"/>
						<column name="MakeMessMap" displayName="Make multivariate environmental similarity surface (MESS) map" dataType="Boolean"/>
						<column name="MakeModMap" displayName="Make most dissimilar variable (MoD) map" dataType="Boolean"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>	
				<datafeed name="SpatialOutputs" dataScope="Scenario">
				  <datasheets>
					<datasheet name="SpatialOutputs" spatialMultiProcessing="True">
					  <columns>
					  	<column name="SpatialOutputsID" dataType="Integer" isPrimary="True"/>
					  	<column name="ScenarioID" dataType="Integer"/>
						<column name="ModelsID" dataType= "Integer" validationType="Datasheet" formula1="Models"/>
						<column name="ProbabilityRaster" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="MessRaster" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="ModRaster" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="ResidualsRaster" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="BinaryRaster" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="Band" dataType="Integer" allowDbNull="True" isOptional="True"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
			</datafeeds>
		</transformer>
		<!--Ensemble Model Transformer-->
		<transformer
		  name="EnsembleModel"
		  displayName ="9 - Ensemble Model"
		  isRunnable="True"
		  programName="Python"
		  programArguments="9-ensemble-model.py"
		  className="SyncroSim.StochasticTime.StochasticTimeTransformer" 
		  classAssembly="SyncroSim.StochasticTime"
		  runContext="LocalOnly"
		  condaEnv="wisdm-py-conda.yml">
			<pipeline>
				<datafeed name="corestime_Multiprocessing" type="Input"/>
				<datafeed name="TemplateRaster" type="Input"/>
				<datafeed name="EnsembleOptions" type="Input"/>
				<datafeed name="SpatialOutputs"/>
				<datafeed name="EnsembleOutputs" type="Output"/>
			</pipeline>
			<datafeeds>	
				<datafeed name="EnsembleOptions" displayName="Ensemble Options" dataScope="Scenario">
				  <datasheets>
					<datasheet  name="EnsembleOptions" displayName="Ensemble Options" isSingleRow="True">
					  <columns>
						<column name="EnsembleOptionsID" dataType="Integer" isPrimary="True"/>
						<column name="ScenarioID" dataType="Integer"/>
						<column name="MakeProbabilityEnsemble" displayName="Make probability ensemble map" dataType="Boolean"/>
						<column name="ProbabilityMethod" displayName="Probability ensemble method" dataType="Integer" validationType="List" formula1="0:Mean|1:Sum"/>
						<column name="NormalizeProbability" displayName="Normalize probability before ensemble" dataType="Boolean"/>
						<column name="MakeBinaryEnsemble" displayName="Make binary ensemble map" dataType="Boolean"/>
						<column name="BinaryMethod" displayName="Binary ensemble method" dataType="Integer" validationType="List" formula1="0:Mean|1:Sum"/>
						<column name="IgnoreNA" displayName="Ignore NA values during ensemble" dataType="Boolean"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>	
				<datafeed name="EnsembleOutputs" dataScope="Scenario">
				  <datasheets>
					<datasheet name="EnsembleOutputs">
					  <columns>
					  	<column name="EnsembleOutputsID" dataType="Integer" isPrimary="True"/>
					  	<column name="ScenarioID" dataType="Integer"/>
						<column name="ProbabilityRasterMean" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="ProbabilityRasterSum" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="BinaryRasterMean" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="BinaryRasterSum" dataType="String" isExternalFile="True" isRaster="True"/>
						<column name="Band" dataType="Integer" allowDbNull="True" isOptional="True"/>
					  </columns>
					</datasheet>
				  </datasheets>
				</datafeed>
			</datafeeds>
		</transformer>
		 <!--Export Transformers-->
		<transformer
		  name="CovariateCorrelationExportInitial" dataSheet="CovariateCorrelationMatrix" column="InitialMatrix" 
		  isFolderExport="True" className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer
		  name="CovariateCorrelationExportSelected" dataSheet="CovariateCorrelationMatrix" column="SelectedMatrix" 
		  isFolderExport="True" className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="ModelExportRDS" dataSheet="ModelOutputs" column="ModelRDS" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="ModelExportText" dataSheet="ModelOutputs" column="TextOutput" isFolderExport="True"
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="VariableImportanceExportData" dataSheet="ModelOutputs" column="VariableImportanceData" isFolderExport="True"
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="ProbMapExport" dataSheet="SpatialOutputs" column="ProbabilityRaster" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="MessMapExport" dataSheet="SpatialOutputs" column="MessRaster" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="ModMapExport" dataSheet="SpatialOutputs" column="ModRaster" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="ResidMapExport" dataSheet="SpatialOutputs" column="ResidualsRaster" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer
			name="BinMapExport" dataSheet="SpatialOutputs" column="BinaryRaster" isFolderExport="True"
			className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="MaxentFilesExport" dataSheet="ModelOutputs" column="MaxentFiles" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="MeanProbEnsembleExport" dataSheet="EnsembleOutputs" column="ProbabilityRasterMean" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="SumProbEnsembleExport" dataSheet="EnsembleOutputs" column="ProbabilityRasterSum" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="MeanBinEnsembleExport" dataSheet="EnsembleOutputs" column="BinaryRasterMean" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
		<transformer 
		  name="SumBinEnsembleExport" dataSheet="EnsembleOutputs" column="BinaryRasterSum" isFolderExport="True" 
		  className="SyncroSim.Core.Forms.FolderExportTransformer" classAssembly="SyncroSim.Core.Forms">
		</transformer>
	</transformers>
	<layouts>
		<!--Library Datafeeds Layout-->
		<layout name="coreforms_LibraryDatafeeds"> 
		  <item name="core_Backup"/>
		  <item name="core_Rconfig"/>
		  <item name="core_Pyconfig"/>
		  <!--item name="core_Condaconfig"/-->
		  <group name="Options">
		  	<item name="core_Options"/>
			<item name="corestime_Options"/>
			<item name="Network"/>
		  </group>
		</layout>  
		<!--Project Datafeeds Layout-->
		<layout name="coreforms_ProjectDatafeeds">
		  <item name="Covariates"/>
		  <!--item name="Models"/-->
		</layout> 
		<!--Scenario Datafeeds Layout-->
		<layout name="coreforms_ScenarioDatafeeds">
		  <group name="DataPreparation" displayName="Data Preparation">
		  	<group name="SpatialData" displayName="Spatial Data">
				<item name="TemplateRaster" showIf="inPipeline"/>
				<item name="CovariateData" showIf="inPipeline"/>
				<item name="RestrictionRaster" showIf="inPipeline"/>
			</group>
		  	<group name="FieldData" displayName="Field Data">
				<item name="FieldData" showIf="inPipeline"/>
				<item name="FieldDataOptions" showIf="inPipeline"/>
				<item name="BackgroundDataOptions" showIf="inPipeline"/>
		  	</group>
		  	<item name="ValidationOptions" showIf="inPipeline"/>
		  	<item name="corestime_Multiprocessing" showIf="inPipeline"/>
		  </group>
		  <group name="VariableReduction" displayName="Variable Reduction">
			<item name="SiteData" showIf="inPipeline"/>
			<item name="CovariateSelectionOptions" showIf="inPipeline"/>
			<item name="ReducedCovariates" showIf="inPipeline"/>
		  </group>
		  <group name="Models">
		  	<item name="BRT" showIf="inPipeline"/>
			<!--item name="GAM" showIf="inPipeline"/-->
			<item name="GLM" showIf="inPipeline"/>
			<item name="Maxent" showIf="inPipeline"/>
			<item name="RandomForest" displayName="Random Forest" showIf="inPipeline"/>
			<item name="ModelOutputs" showIf="inPipeline"/>
		  </group>
		  <group name="OutputOptions" displayName="Output Options">
		  	<item name="OutputOptions" showIf="inPipeline"/>
			<item name="EnsembleOptions" showIf="inPipeline"/>
		  </group>
		</layout> 
		<!--Result Transformers Layout-->
		<layout name="coreforms_ResultTransformers">
			<item name="corestime_MapTransformer"/>
			<group name="Export">
				<group name="CovariateCorrelationExportMatrix" displayName="Covariate Correlation Matrix">
					<item name="CovariateCorrelationExportInitial" displayName="Initial Covariates"/>
					<item name="CovariateCorrelationExportSelected" displayName="Selected Covariates"/>
				</group>
				<group name="ModelOutputs" displayName="Model Outputs">
					<item name="ModelExportRDS" displayName="Model RDS"/>
					<item name="ModelExportText" displayName="Summary Text"/>
					<item name="VariableImportanceExportData" displayName="Variable Importance"/>
					<item name="MaxentFilesExport" displayName="Maxent Files"/>
				</group>
				<group name="MapOutputs" displayName="Map Outputs">
					<item name="ProbMapExport" displayName="Probability"/>
					<item name="BinMapExport" displayName="Binary"/>
					<item name="MessMapExport" displayName="MESS"/>
					<item name="ModMapExport" displayName="MoD"/>
					<item name="ResidMapExport" displayName="Residuals"/>
				</group>
				<group name="EnsembleOutputs" displayName="Ensemble Outputs">
					<item name="MeanProbEnsembleExport" displayName="Probability Ensemble (Mean)"/>
					<item name="SumProbEnsembleExport" displayName="Probability Ensemble (Sum)"/>
					<item name="MeanBinEnsembleExport" displayName="Binary Ensemble (Mean)"/>
					<item name="SumBinEnsembleExport" displayName="Binary Ensemble (Sum)"/>
				</group>
			</group>
        </layout>
		<!--Maps Layout-->
		<layout name="corestimeforms_Maps" displayName="Visuals">
			<item name="CovariateMaps" displayName="Covariate Maps" dataSheet="CovariateData" column="RasterFilePath" filter="CovariatesID" />
			<item name="RestrictionMap" displayName="Restriction Maps" dataSheet="RestrictionRaster" column="RasterFilePath"/>
			<group name="CovariateCorrelationMatrix" displayName="Covariate Correlations">
				<item name="InitialMatrix" displayName="Initial Matrix" dataSheet="CovariateCorrelationMatrix" column="InitialMatrix"/>
				<item name="SelectedMatrix" displayName="Selected Matrix" dataSheet="CovariateCorrelationMatrix" column="SelectedMatrix"/>
			</group>
			<group name="MapOutputs" displayName="Map Outputs">
				<item name="ProbabilityMap" displayName="Probability" dataSheet="SpatialOutputs" column="ProbabilityRaster" filter="ModelsID" extendedIdentifier="(Probability)"/>
				<item name="BinaryMap" displayName="Binary" dataSheet="SpatialOutputs" column="BinaryRaster" filter="ModelsID" extendedIdentifier="(Binary)"/>
				<item name="MessMap" displayName="MESS" dataSheet="SpatialOutputs" column="MessRaster" filter="ModelsID" extendedIdentifier="(MESS)"/>
				<item name="ModMap" displayName="MoD" dataSheet="SpatialOutputs" column="ModRaster" filter="ModelsID" extendedIdentifier="(MoD)"/>
				<item name="ResidualsMap" displayName="Residuals" dataSheet="SpatialOutputs" column="ResidualsRaster" filter="ModelsID" extendedIdentifier="(Residuals)"/>
			</group>
			<group name="ModelOutputs" displayName="Model Outputs">
				<item name="ResponseCurves" displayName="Response Curves" dataSheet="ModelOutputs" column="ResponseCurves" filter="ModelsID" extendedIdentifier="(Response Curves)"/>
				<item name="ResidualsPlot" displayName="Standard Residuals" dataSheet="ModelOutputs" column="ResidualsPlot" filter="ModelsID" extendedIdentifier="(Standard Residuals)"/>
				<item name="ResidualSmoothPlot" displayName="Residuals Smooth" dataSheet="ModelOutputs" column="ResidualSmoothPlot" filter="ModelsID" extendedIdentifier="(Residuals Smooth)"/>	
				<item name="CalibrationPlot" displayName="Calibration" dataSheet="ModelOutputs" column="CalibrationPlot" filter="ModelsID" extendedIdentifier="(Calibration)"/>
				<item name="ROCAUCPlot" displayName="ROC/AUC" dataSheet="ModelOutputs" column="ROCAUCPlot" filter="ModelsID" extendedIdentifier="(ROC/AUC)"/>
				<item name="AUCPRPlot" displayName="AUCPR" dataSheet="ModelOutputs" column="AUCPRPlot" filter="ModelsID" extendedIdentifier="(AUCPR)"/>
				<item name="ConfusionMatrix" displayName="Confusion Matrix" dataSheet="ModelOutputs" column="ConfusionMatrix" filter="ModelsID" extendedIdentifier="(Confusion Matrix)"/>
				<item name="VariableImportancePlot" displayName="Variable Importance" dataSheet="ModelOutputs" column="VariableImportancePlot" filter="ModelsID" extendedIdentifier="(Variable Importance)"/>		
			</group>
			<group name="EnsembleOutputs" displayName="Ensemble Outputs">
				<item name="ProbabilityMapMean" displayName="Probability Ensemble (Mean)" dataSheet="EnsembleOutputs" column="ProbabilityRasterMean"/>
				<item name="ProbabilityMapSum" displayName="Probability Ensemble (Sum)" dataSheet="EnsembleOutputs" column="ProbabilityRasterSum"/>
				<item name="BinaryMapMean" displayName="Binary Ensemble (Mean)" dataSheet="EnsembleOutputs" column="BinaryRasterMean"/>
				<item name="BinaryMapSum" displayName="Binary Ensemble (Sum)" dataSheet="EnsembleOutputs" column="BinaryRasterSum"/>
			</group>
		</layout>
	</layouts>	
<updateProvider 
  schemaVersion="3" 
  minPackageVersion="1.0.15" 
  className="SyncroSim.Core.XMLUpdateProvider" 
  classAssembly="SyncroSim.Core"/>
</package>
